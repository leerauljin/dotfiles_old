alias s="sketchybar"

PLUGIN_DIR="$HOME/.config/sketchybar/plugins"
FONT="BlexMono Nerd Font"
BACKGROUND=0xff1c1e26
FOREGROUND=0xffd5d8da
RED=0xffe95678
GREEN=0xff29d398
YELLOW=0xfffab795
BLUE=0xff26bbd9
MAGENTA=0xffee64ac
CYAN=0xff59e1e3

# Bar appearance

s --bar height=32        \
                 blur_radius=0   \
                 position=top  \
                 y_offset=6       \
                 margin=6         \
                 corner_radius=10  \
                 padding_left=10  \
                 padding_right=10 \
                 shadow=off        \
                 color=$BACKGROUND

# Defaults

s --default updates=when_shown                        \
                     drawing=on                                \
                     icon.font="$FONT:Bold:18.0"               \
                     icon.color=$FOREGROUND                     \
                     label.font="$FONT:Bold:16.0"              \
                     label.color=$FOREGROUND                    \
                     label.padding_left=4                      \
                     label.padding_right=4                     \
                     icon.padding_left=4                       \
                     icon.padding_right=4

# Left items

s --add alias "iStat Menus Status,com.bjango.istatmenus.battery" left          \
            --set "iStat Menus Status,com.bjango.istatmenus.battery" icon.padding_left=0  \
                  icon.padding_right=0 \
                  label.padding_left=0 \
                  label.padding_right=0

# SPACE_ICONS=("¹" "²爵" "³" "⁴" "⁹邏" "⁰" "7" "8" "9" "10")
SPACE_ICONS=("" "爵" "" "" "" "" "" "8" "9" "10")

for i in "${!SPACE_ICONS[@]}"
do
  sid=$(($i+1))
  s --add space space.$sid left                                 \
             --set space.$sid associated_space=$sid                      \
                              icon=${SPACE_ICONS[i]}                     \
                              icon.padding_left=4                        \
                              icon.padding_right=4                       \
                              background.padding_left=4                  \
                              background.padding_right=4                 \
                              background.color=$RED               \
                              background.corner_radius=0                 \
                              background.height=2                       \
                              background.y_offset=-12                    \
                              background.drawing=off                     \
                              label.drawing=off                          \
                              script="$PLUGIN_DIR/space.sh"              \
                              click_script="yabai -m space --focus $sid"
done

s --add item space_separator left \
           --set space_separator icon= \
                                 background.padding_left=6 \
                                 background.padding_right=6 \
                                 icon.font="$FONT:SemiBold:14.0"        \
                                 label.drawing=off \
                                 icon.color=$RED

s --add item window_title left                             \
           --set window_title    script="$PLUGIN_DIR/window_title.sh" \
                                 label.font="$FONT:SemiBold Italic:14.0"        \
                                 label.color=$YELLOW                    \
                                 icon.drawing=off                     \
                                 label.y_offset=1 \
           --subscribe window_title front_app_switched

# Center items

s --add item date center                        \
           --set date   update_freq=10                  \
                        background.padding_right=0 \
                         icon.drawing=off                 \
                        icon.padding_right=0 \
                        label.padding_right=0   \
                        label.align=right   \
                         label.font="$FONT:Bold:16.0"        \
                         script="$PLUGIN_DIR/date.sh" 

s --add item date_separator center \
           --set date_separator icon="|"\
                                    align=center   \
                                 background.padding_left=3 \
                                 background.padding_right=3 \
                                 icon.font="$FONT:SemiBold:14.0"        \
                                 label.drawing=off \
                                 icon.color=$RED

s --add item clock center                        \
           --set clock   update_freq=10                  \
                        background.padding_left=0 \
                         icon.drawing=off                 \
                        icon.padding_left=0 \
                        label.padding_left=3   \
                        label.align=left   \
                         label.font="$FONT:Bold:16.0"          \
                         label.color=$GREEN \
                         label.y_offset=1 \
                         script="$PLUGIN_DIR/clock.sh"   

# Right items

# s --query default_menu_items

for i in \
"TextInputMenuAgent,Item-0" \
  "Control Center,WiFi"     \
  "Control Center,Sound"     \
  "Dropbox,Item-0"              \
  "iStat Menus Status,com.bjango.istatmenus.network" \
  "iStat Menus Status,com.bjango.istatmenus.memory" \
  "iStat Menus Status,com.bjango.istatmenus.cpu"
            
do
  s --add alias "$i" right          \
             --set "$i" icon.padding_left=0  \
                        icon.padding_right=0 \
                        label.padding_left=0 \
                        label.padding_right=0
done

# Finalize

s --update

echo "s configuration loaded.."