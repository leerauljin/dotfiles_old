#!/bin/sh

alias s="sketchybar"


PLUGIN_DIR="$HOME/.config/sketchybar/plugins"
FONT="JetBrainsMono Nerd Font"
FONTALT="Helvetica"
BAR=0x00161616
BACKGROUND=0xff161616
FOREGROUND=0xfff2f4f8
RED=0xffee5396
GREEN=0xff25be6a
BLUE=0xff67b0e8
YELLOW=0xff08bdba

# Bar appearance

s --bar height=28        \
                 blur_radius=0   \
                 position=top  \
                 y_offset=6       \
                 margin=6         \
                 corner_radius=8  \
                 padding_left=10  \
                 padding_right=10 \
                 shadow=off        \
                 color=$BACKGROUND

# Defaults

s --default updates=when_shown                        \
                     drawing=on                                \
                     icon.font="$FONT:Bold:18.0"               \
                     icon.color=$FOREGROUND                     \
                     label.font="$FONT:Bold:16.0"              \
                     label.color=$FOREGROUND                    \
                     label.padding_left=4                      \
                     label.padding_right=4                     \
                     icon.padding_left=4                       \
                     icon.padding_right=4

# Left items
s --add item date left                        \
           --set date   update_freq=120                  \
                        background.padding_right=0 \
                         icon.drawing=off                 \
                        icon.padding_right=0 \
                        label.padding_left=0   \
                        label.padding_right=6   \
                        label.align=left   \
                         label.font="$FONT:Bold:10.0"        \
                         y_offset=7                      \
                        width=15          \
                         script="$PLUGIN_DIR/date.sh"     \
           --subscribe                 date system_woke             \

s --add item clock left                        \
           --set clock   update_freq=1                  \
                        background.padding_left=0 \
                        background.padding_right=0 \
                         icon.drawing=off                 \
                        icon.padding_left=0 \
                        label.padding_left=0   \
                        label.align=left   \
                         label.font="$FONT:ExtraBold:14.0"          \
                         label.color=$GREEN \
                         y_offset=-5                      \
                         script="$PLUGIN_DIR/clock.sh"   
           --subscribe                 clock system_woke             \

s --add item clock_separator left \
           --set clock_separator icon="|"\
                                    align=center   \
                                 icon.font="$FONT:ExtraBold:14.0"        \
                                 label.drawing=off \
                                 icon.color=$RED
# Center items

SPACE_ICONS=("" "爵" "" "" "" "" "" "8" "9" "10")
for i in "${!SPACE_ICONS[@]}"
do
  sid=$(($i+1))
  s --add space space.$sid left                                 \
             --set space.$sid associated_space=$sid                      \
                              icon=${SPACE_ICONS[i]}                     \
                              background.padding_left=4                  \
                              background.padding_right=4                 \
                              background.color=$RED               \
                              background.height=2                       \
                              background.y_offset=-12                     \
                              label.drawing=off                          \
                              script="$PLUGIN_DIR/space.sh"              \
                              click_script="yabai -m space --focus $sid"
done

# Right items

# s --add item date_separator right \
#            --set date_separator icon="|"\
#                                     align=center   \
#                                  icon.font="$FONT:ExtraBold:14.0"        \
#                                  label.drawing=off \
#                                  icon.color=$RED
# s --query default_menu_items

for i in \
  "Control Center,Battery"     \
  "Control Center,WiFi"     \
  "Control Center,Sound"     \
  "Amphetamine, Amphetamine"     \
  "Tailscale,Item-0"              \
  "Dropbox,Item-0"              \
  "TextInputMenuAgent,Item-0" 
            
do
  s --add alias "$i" right          \
             --set "$i" icon.padding_left=0  \
                        icon.padding_right=0 \
                        label.padding_left=0 \
                        label.padding_right=0 

done


# Finalize

s --update

echo "s configuration loaded.."
